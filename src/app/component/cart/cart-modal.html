<div
  class="modal fade show d-block"
  style="background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px)"
  tabindex="-1"
>
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content shadow-lg">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title">
          <i class="bi bi-cart3 me-2"></i>Giỏ hàng người dùng #{{ userId }}
        </h5>
        <button type="button" class="btn-close btn-close-white" (click)="onClose()"></button>
      </div>
      <div class="modal-body">
        <div *ngIf="isLoading" class="text-center py-5">
          <div class="spinner-border text-info"></div>
          <p class="mt-2">Đang tải dữ liệu...</p>
        </div>
        <table class="table table-hover table-bordered align-middle mb-0">
          <thead class="table-secondary text-center">
            <tr>
              <th>Sản phẩm</th>
              <th>Số lượng</th>
              <th>Đơn giá</th>
              <th>Thành tiền</th>
            </tr>
          </thead>
          <tbody>
            @for (item of cartData?.items; track item.productId; let i = $index) {
              <tr>
                <td class="ps-3 fw-semibold text-primary">{{ item.productName }}</td>
                <td class="text-center">
                  <div
                    class="badge rounded-pill bg-light text-dark border d-inline-flex align-items-center p-1"
                  >
                    <button class="btn btn-danger btn-custom-sm" (click)="changeQuantity(i, -1)">
                      -
                    </button>
                    <span class="mx-2 fw-bold">{{ listCurQuan[i] }}</span>
                    <button class="btn btn-success btn-custom-sm" (click)="changeQuantity(i, 1)">
                      +
                    </button>
                  </div>
                </td>
                <td class="text-end text-muted">{{ item.price | number }}đ</td>
                <td class="text-end fw-bold text-dark">
                  {{ listCurQuan[i] * item.price | number }}đ
                </td>
              </tr>
            }
          </tbody>
          <tfoot>
            <tr class="table-light">
              <td colspan="3" class="text-end py-3 text-uppercase small fw-bold text-muted">
                Tổng thanh toán:
              </td>
              <td class="text-end py-3">
                <span class="fs-5 fw-bold text-danger">{{ cartData?.totalPrice | number }}đ</span>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="onClose()">Đóng</button>
        <button type="button" class="btn btn-primary px-4" (click)="approve()">
          <i class="bi bi-check2-circle me-1"></i> Thanh toán
        </button>
      </div>
    </div>
  </div>
</div>
